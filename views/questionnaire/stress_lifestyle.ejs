<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">    

	<title>catcatmed| questionnaire</title>

    <link rel="shortcut icon" type="image/png" href="../images/favicon.png"/>
    <link rel="stylesheet" href="../bootstrap-3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="../stylesheets/header.css">
    <link rel="stylesheet" href="../stylesheets/qn.css">
    <script src="../javascript/jquery/jquery_v-3-3-1.js"></script>
    <script src="../bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <style>
        .BEFanswer{
            background-color:  #F1F1F2;
            color: #3D5BA8;
            padding: 8px;
            border-radius: 5px;
            margin: 6px 0;
            cursor: pointer;
        }
        .BEFanswer:hover{
            background-color: #87A7D6;
            color: white;            
        }
        .BEFanswer .BEFoptions{            
            font-size: 1.3em;
            width: 100%;
            text-align: center;
            right: 0;
            top:50%;
            transform:translateY(-50%);
        }
    </style>
</head>
<body onselectstart="return false" class="qnbody" id="body" style="display:none">
    <div class="row">
        <div class="col-lg-2 col-lg-offset-10 col-md-3 col-md-offset-9 col-sm-3 col-sm-offset-9 col-xs-5 col-xs-offset-7">
            <button class="indexButton" onclick="window.location.href='/'">回首頁</button>
        </div>
    </div>
    <div class="row hidden-xs padding"></div>
    <div class="row">
        <div class="col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1 text-center">
            <% if(name){ %>
                <h3>請問您的生活型態是否下列的改變？</h3>
            <% }else{ %>
                <h3>請問您的生活型態是否下列的改變？</h3>
            <% } %>
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1 col-xs-12"><div class="BEFanswer" id="A" onclick="Icon(this.id)"><span class="BEFoptions">長期不在家</span></div></div>
            </div>
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1 col-xs-12"><div class="BEFanswer" id="B" onclick="Icon(this.id)"><span class="BEFoptions">工作內容，工作時間變更</span></div></div>
            </div>
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1 col-xs-12"><div class="BEFanswer" id="C" onclick="Icon(this.id)"><span class="BEFoptions">家中常常有人進出</span></div></div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2 col-xs-12 text-center">
            <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6"><button class="nextButton" onclick="Unsure()">沒有/不確定</button></div>                
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6"><button class="nextButton" onclick="Send()">下一題</button></div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-3 col-lg-offset-1">
            <button class="backButton" onclick="Back()">Back</button>
        </div>
    </div>
</body>
</html>
<script>
    $(document).ready(function(){
        $('#body').fadeIn(500);
    });
    let A = 0;
    let B = 0;
    let C = 0;
    let D = 0;
    let E = 0;
    let F = 0;
    let G = 0;
    function Back(){
        $.ajax({
            method : "POST",
            url : 'back'
        }).done(function(data){
            window.location.href = '' + data;
        });
    }
    function Send(){
        if((A+B+C+D+E+F+G)==0){
            alert('若沒有上述的情形的話，請選擇“沒有/不確定”之選項喔！');
        }else{
            let s = [];
            if(A==1) s.push('A');
            if(B==1) s.push('B');
            if(C==1) s.push('C');
            if(D==1) s.push('D');
            if(E==1) s.push('E');
            if(F==1) s.push('F');
            if(G==1) s.push('G');
            $.ajax({
                method: 'POST',
                url: 'stress_lifestyle',
                data: {
                    name : JSON.stringify(s),
                    unsure : 'no'
                }
            }).done(function(data){
                window.location.href = '' + data;
            });
        }
    }
    function Unsure(){
        $.ajax({
            method: 'POST',
            url: 'stress_lifestyle',
            data: {
                name : JSON.stringify('?'),
                unsure : 'yes'
            }
        }).done(function(data){
            window.location.href = '' + data;
        });
    }
    function Icon(id){
        $('#'+id).toggleClass('selected');
        if(id=='A') {if(A==0)A=1; else A=0;}
        if(id=='B') {if(B==0)B=1; else B=0;}
        if(id=='C') {if(C==0)C=1; else C=0;}
        if(id=='D') {if(D==0)D=1; else D=0;}
        if(id=='E') {if(E==0)E=1; else E=0;}
        if(id=='F') {if(F==0)F=1; else F=0;}
        if(id=='G') {if(G==0)G=1; else G=0;}
    }
</script>